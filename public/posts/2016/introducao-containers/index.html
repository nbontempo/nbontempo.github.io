<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <title>Introdu√ß√£o de Containers - Nicolas Bontempo</title>
  
  <meta name="description" content="Conceitos, pr√≥s e contras, orquestra√ß√£o, ferramentas (docker e outras alternativas) A virtualiza√ß√£o baseada em containers √© uma das tecnologias mais quentes se for pensar no contexto da computa√ß√£o em nuvem. Ela gera combust√≠vel para inova√ß√£o e muda como as aplica√ß√µes s√£o desenvolvidas e operadas hoje em dia. √â dif√≠cil nomear grandes empresas de tecnologia que n√£o estejam investindo, nem usando a tecnologia de containers de uma forma ou de outra. As ideias de containers n√£o s√£o novas, as tecnologias para sua cria√ß√£o est√£o dispon√≠veis desde os anos 2000.">
  <meta name="author" content="Nicolas Bontempo">
  
  <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i" rel="stylesheet">
  <link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet">
  
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
  <link rel="icon" href="/img/favicon.ico">
  
  <link rel="alternate" type="application/atom+xml" href="/index.xml" title="Nicolas Bontempo">
</head>
<body class="single">
  <header class="header">
    
    <p class="title"><a href="/"><span>üê±‚Äçüëì</span>Nicolas Bontempo</a></p>
    
    <button class="menu-toggle" type="button"></button>
    <nav class="menu">
      <ul>
        
        
        <li class="">
          <a href="https://github.com/nickbom">Github</a>
        </li>
        
        <li class="">
          <a href="https://www.linkedin.com/in/nicolasbontempo">Linkedin</a>
        </li>
        
        <li class="">
          <a href="/sobre/">Sobre o autor</a>
        </li>
        
      </ul>
    </nav>
  </header>
  <main class="main">

<article class="post post-view">
  <header class="post-header">
    <h1 class="post-title">Introdu√ß√£o de Containers</h1>
    <p class="post-meta">Nicolas Bontempo ¬∑ 13/11/2016<div style="color:grey; font-size:16px;">
        <strong>Tags:</strong> 
        <a href="/%20/tags/%20containers">containers</a> 
        <a href="/%20/tags/%20docker">docker</a> 
        <a href="/%20/tags/%20introdu%C3%A7%C3%A3o">introdu√ß√£o</a> 
      </div>
    </p>
  </header>
  <div class="post-content"><h1 id="conceitos-pr√≥s-e-contras-orquestra√ß√£o-ferramentas-docker-e-outras-alternativas">Conceitos, pr√≥s e contras, orquestra√ß√£o, ferramentas (docker e outras alternativas)</h1>
<p>A virtualiza√ß√£o baseada em containers √© uma das tecnologias mais quentes se for pensar no contexto da computa√ß√£o em nuvem. Ela gera combust√≠vel para inova√ß√£o e muda como as aplica√ß√µes s√£o desenvolvidas e operadas hoje em dia. √â dif√≠cil nomear grandes empresas de tecnologia que n√£o estejam investindo, nem usando a tecnologia de containers de uma forma ou de outra. As ideias de containers n√£o s√£o novas, as tecnologias para sua cria√ß√£o est√£o dispon√≠veis desde os anos 2000. Por√©m, com o surgimento do docker no cen√°rio, foi o que gerou o crescimento dessa t√©cnica de desenvolvimento. Nesse artigo podemos discutir um pouco sobre essa fascinante tecnologia, podendo gerar uma reflex√£o sobre suas promessas e cada vez mais sobre seu crescimento no cen√°rio de desenvolvimento.</p>
<h2 id="o-que-s√£o-containers">O que s√£o containers?</h2>
<p>Containers (virtualiza√ß√µes em n√≠vel do sistema operacional) √© uma abordagem para virtualiza√ß√£o que prov√™ o m√≠nimo necessario para uma aplica√ß√£o funcionar como o pretendido. De uma forma, elas podem ser consideradas uma m√°quina virtual super minimalista que n√£o est√° rodando em um hypervisor ( controle de virtualiza√ß√£o para utilizar diferentes sistema operacionais no mesmo computador ). Usualmente dentro do container temos incluido:</p>
<ul>
<li>Aplica√ß√£o</li>
<li>Depend√™ncias</li>
<li>Bibliotecas</li>
<li>Bin√°rios</li>
<li>Arquivos de configura√ß√£o</li>
</ul>
<p>Utilizar containers possibilita que voc√™ rode sua aplica√ß√£o em diferentes ambientes, atrav√©s da abstra√ß√£o do sistema operacional e sua estrutura f√≠sica. Aplica√ß√µes em container compartilham o kernel do sistema operacional do host com outros containers e as partes compartilhadas pelo sistema operacional tem permiss√£o apenas para leitura. Dentro de um container normalmente temos apenas um servi√ßo ou microservice.</p>
<p>O tamanho de um container √© usualmente medido em alguns MBs e requer cerca de 2 segundos para prover um. Quando containers precisam de uma atualiza√ß√£o por exemplo, elas precisam apenas de uma modifica√ß√£o no arquivo de configura√ß√µes e em seguida destruir o antigo container e criar um novo.</p>
<h2 id="quais-s√£o-as-principais-diferen√ßas-entre-containers-e-m√°quinas-virtuais">Quais s√£o as principais diferen√ßas entre containers e m√°quinas virtuais?</h2>
<p>Mesmo que as m√°quinas virtuais e containers compartilhem algumas caracter√≠sticas, existem diferen√ßas significativas que as diferenciam.</p>
<ul>
<li>M√°quinas virtuais cont√™m um sistema operacional completo e aplica√ß√µes.</li>
<li>Virtualiza√ß√µes baseadas no Hypervisor s√£o intensivos em gasto de recursos, uma VM pode gastar muitos GB dependendo do sistema operacional utilizado para virtualiza√ß√£o.</li>
<li>M√°quinas virtuais usam o Hypervisor para compartilhar e gerenciar o hardware, enquanto containers compartilham o kernel do sistema operacional host para acessar o hardware.</li>
<li>M√°quinas virtuais tem o seu pr√≥prio kernel, assim elas n√£o usam ou compartilham o kernel do sistema operacional host, j√° que eles s√£o isolados de cada um em um n√≠vel baixo.</li>
<li>M√°quinas virtuais residindo no mesmo servidor rodam diferentes sistemas operacionais, containers no mesmo servidor usam o mesmo SO.</li>
<li>Containers est√£o virtualizando o SO subjacente enquanto as m√°quinas virtuais est√£o virtualizando o hardware subjacente.</li>
</ul>
<h2 id="quais-s√£o-as-vantagens-de-usar-containers">Quais s√£o as vantagens de usar containers?</h2>
<ul>
<li>O tamanho de um container √© muito menor que a de uma m√°quina virtual. Um servidor pode hostear significantemente mais containers que m√°quinas virtuais.</li>
<li>Rodar containers gasta menos recursos que rodar m√°quinas virtuais, assim voc√™ pode adicionar mais carga de trabalho computacional no mesmo servidor.</li>
<li>Prover containers gasta apenas alguns segundos ou menos, assim, o data center pode reagir rapidamente a um pico de atividade do usu√°rio.</li>
<li>Containers possibilitam a aloca√ß√£o r√°pida de recursos ao processo e de rodar sua aplica√ß√£o em v√°rios ambientes.</li>
<li>O uso de containers pode diminuir o tempo necess√°rio para o desenvolvimento, teste e deploy das suas aplica√ß√µes e servi√ßos.</li>
<li>Teste e bug track tamb√©m se tornam menos complicados desde que n√£o exista diferen√ßa entre rodar sua aplica√ß√£o localmente, ou em um servidor de teste, ou em produ√ß√£o.</li>
<li>Containers s√£o muito rent√°veis. Eles podem diminuir os custos de opera√ß√£o (menos servidores, menos empregados) e o custo de desenvolvimento (desenvolvimento em um ambiente consistente).</li>
<li>A virtualiza√ß√£o por containers s√£o uma grande op√ß√£o para microservices e deploy continuo.</li>
</ul>
<h2 id="quais-s√£o-as-desvantagens-de-usar-containers-">Quais s√£o as desvantagens de usar containers ?</h2>
<ul>
<li>Uma das maiores desvantagens da virtualiza√ß√£o baseada em container comparada com as tradicionais m√°quinas virtuais √© a seguran√ßa. Containers compartilham o kernel, outros componentes do sistema operacional e eles possuem acesso de root. Isso significa que containers s√£o menos isolados comparados com m√°quinas virtuais, e se existe alguma vulnerabilidade do kernel pode comprometer a seguran√ßa dos containers tamb√©m. M√°quinas virtuais apenas compartilham o Hypervisor o que possui menos funcionalidades e √© menos propenso a ataques do que o kernel compartilhado dos containers.</li>
<li>Menos flex√≠vel em quest√£o de sistemas operacionais. Voc√™ precisa iniciar um novo servidor para ter a possibilidade de rodar containers com diferentes sistemas operacionais. Enquanto m√°quinas virtuais com qualquer tipo de sistema operacional podem viver ao lado do outro no mesmo servidor. Isso pode n√£o ser um problema para provedores de host, mas para aplica√ß√µes complexas de empresas isso pode ser uma limita√ß√£o s√©ria.</li>
<li>Outro desafio √© a cria√ß√£o de redes. Implantar containers em um caminho isolado enquanto mantem uma conex√£o adequada pode ser complicado. Existem solu√ß√µes que est√£o tentando resolver esse problema, como <a href="https://www.weave.works/weave-net-container-network-interface-kubernetes/">Weave Net 1.5</a> mas parece que existe muito espa√ßo para melhorias.</li>
</ul>
<h2 id="ferramentas">Ferramentas</h2>
<p><a href="https://www.docker.com/">Docker</a> √© de longe a plataforma mais famosa para o uso de containers. Baseada em tecnologias open source anteriores, o docker criou uma forma padr√£o para o deploy de aplica√ß√µes linux em containers os quais podem rodar diferentes ambientes como pretendido. Docker tem um grande n√∫mero de projetos open source servindo como base para a plataforma docker. A empresa foi fundada em 2010 por Solomon Hykes com o levantamento de $180.8 milh√µes para a cria√ß√£o da empresa. Eles constru√≠ram parcerias com gigantes da tecnologia incluindo Microsoft e Google. Sua popularidade √© t√£o grande que de acordo com a <a href="https://clusterhq.com/assets/pdfs/state-of-container-usage-june-2016.pdf">revista Cluster</a> 94% dos entrevistados usavam Docker.
Embora o docker seja a tecnologia de container mais popular, existem muitas outras solu√ß√µes como:</p>
<ul>
<li>
<p><a href="https://linuxcontainers.org/lxc/introduction/">LXC</a></p>
</li>
<li>
<p><a href="https://linuxcontainers.org/lxd/introduction/">LXD</a></p>
</li>
<li>
<p><a href="https://coreos.com/rkt/">RKT</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/technetwork/server-storage/solaris/containers-169727.html">Oracle Solaris Containers</a></p>
</li>
<li>
<p><a href="https://www.freebsd.org/doc/handbook/jails.html">BSD Jails</a></p>
</li>
</ul>
<h2 id="existem-solu√ß√µes-container-que-n√£o-sejam-baseadas-em-linux">Existem solu√ß√µes container que n√£o sejam baseadas em linux?</h2>
<p>Sim. Existem <a href="https://msdn.microsoft.com/en-us/virtualization/windowscontainers/about/about_overview">duas solu√ß√µes</a> criadas pela microsoft Windows server container e Hyper-V container. A principal diferen√ßa entre as duas √© que a Windows server container compartilha o kernel com o container host e o outro container Hyper-V n√£o.</p>
<h2 id="container-orchestration">Container Orchestration</h2>
<p>As plataformas de container orchestration d√£o a capacidade para os usu√°rios de implantar, gerenciar e escalar multi-containers baseado em aplica√ß√µes com grandes n√∫cleos sem ter que se preocupar sobre qual servidor hospedar√° um determinado container. Container orchestration √© tamb√©m um espa√ßo com muita competi√ß√£o. Alguns dos mais populares s√£o:</p>
<ul>
<li>
<p><a href="https://aws.amazon.com/ecs/">Amazon ECS</a></p>
</li>
<li>
<p><a href="http://kubernetes.io/">Kubernetes</a></p>
</li>
<li>
<p><a href="https://mesosphere.github.io/marathon/">Marathon</a></p>
</li>
<li>
<p><a href="https://www.nomadproject.io/">Hashicorp Nomad</a></p>
</li>
<li>
<p><a href="https://docs.docker.com/swarm/">Docker Swarm</a></p>
</li>
<li>
<p><a href="https://docs.cloudfoundry.org/concepts/diego/diego-architecture.html">Diego</a></p>
</li>
<li>
<p><a href="https://wiki.openstack.org/wiki/Magnum">Open Stack Magnum</a></p>
</li>
<li>
<p><a href="https://coreos.com/fleet/">CoreOS Fleet</a></p>
</li>
<li>
<p><a href="https://azure.microsoft.com/en-us/blog/azure-container-service-preview/">Azure Container Service</a></p>
</li>
</ul>
<h2 id="revis√£o">Revis√£o</h2>
<p>Virtualiza√ß√£o baseada em container √© uma tecnologia disruptiva que est√° sendo adotada a um ritmo not√°vel por pequenas e m√©dios neg√≥cios. Empresas maiores demonstram um bom interesse tamb√©m, mas est√°o se aproximando da ado√ß√£o no ambiente de produ√ß√£o com muito cuidado. Google search, Google App Engine e Twitter s√£o exemplos de sucesso do uso de containers em grande escala.</p>
<p>M√°quinas virtuais ainda s√£o consideradas como uma tecnologia muito mais madura com uma seguran√ßa muito maior e muitas equipes est√£o mais acostumadas a trabalhar com as mesmas. M√°quinas virtuais s√£o geralmente mais suscet√≠veis para aplica√ß√µes monol√≠ticas e para cen√°rios onde a preocupa√ß√£o com seguran√ßa supera a necessidade de uma solu√ß√£o leve.</p>
<p>A virtualiza√ß√£o baseada em containers √© uma solu√ß√£o muito melhor para o estilo de <a href="/introducoes-microservices.html">arquitetura baseada em microservices</a>, o qual os recursos da aplica√ß√£o s√£o divididos em pequenos e muito bem definidos servi√ßos distintos. Containers e m√°quinas virtuais n√£o se excluem, eles podem ser vistos como solu√ß√µes complementares. Um excelente exemplo para isso √© o <a href="https://www.infoq.com/presentations/container-management-netflix?utm_source=medium&amp;utm_medium=flow.ciweekly&amp;utm_campaign=flow.ci%20says%20hi">Netflix Cloud</a> o qual containers est√£o rodando dentro de m√°quinas virtuais.</p>
</div>
  <footer class="post-footer">
    
    <ul class="post-tags">
      
      <li>
        <a href="/tags/containers/">containers</a>
      </li>
      
      <li>
        <a href="/tags/docker/">docker</a>
      </li>
      
      <li>
        <a href="/tags/introdu%C3%A7%C3%A3o/">introdu√ß√£o</a>
      </li>
      
    </ul>
    
  </footer>
  
   
  <div id="disqus_thread"></div>
  <script>
    var disqus_shortname = 'nicolasbontempo';
    (function () { 
      var d = document,
        s = d.createElement('script');
      s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
   
</article>
</main>
<footer class="footer">
  <span>&copy; 2015-2020 Nicolas Bontempo üéâ</span>
</footer>
<script src="https://cdn.bootcss.com/instantclick/3.0.1/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init();</script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js" data-no-instant></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-71553462-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script data-no-instant>
  hljs.initHighlightingOnLoad();
  menuToggle();
  InstantClick.on('change', function() {
    var blocks = document.querySelectorAll('pre code');
    for (var i = 0; i < blocks.length; i++) {
      hljs.highlightBlock(blocks[i]);
    }
    menuToggle();
  });
  function menuToggle() {
    var $toggle = document.querySelector('.menu-toggle');
    if (!$toggle.offsetParent) {
      return;
    }
    var $body = document.querySelector('body');
    $toggle.addEventListener('click', function() {
      $body.classList.toggle('noscroll');
    }, false);
  }
</script>
</body>
</html>
