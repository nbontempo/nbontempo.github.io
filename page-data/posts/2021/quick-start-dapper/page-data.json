{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/2021/quick-start-dapper","result":{"data":{"markdownRemark":{"id":"1fe18bec-aebd-5e40-b306-3852f37a6588","html":"<p>First, what’s Dapper? Like the project page defines it, <code class=\"language-text\">Dapper - a simple object mapper for .Net</code>, he helps you with the object mapping from datastores, just that, and that’s very helpful to remove some boilerplate code comparing to just using <code class=\"language-text\">ADO.NET</code>.</p>\n<p>So, what’s the main benefits of using <code class=\"language-text\">Dapper</code>:</p>\n<ul>\n<li>The code is open source</li>\n<li>You have more control over your querys comparing to a ORM</li>\n<li>You have less boilerplate code to make the mapping from your querys</li>\n</ul>\n<p>Now to follow this article, you will need:</p>\n<ul>\n<li>Docker (to run the MSSql)</li>\n<li>Visual Studio</li>\n<li>Your favorite MSSql IDE (Azure data studio or SQL Management Studio)</li>\n</ul>\n<h2 id=\"setting-up-our-environment\" style=\"position:relative;\"><a href=\"#setting-up-our-environment\" aria-label=\"setting up our environment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up our environment</h2>\n<p>On this step, we will create the database and the visual studio project, if you have done that already you can jump for the next part.</p>\n<p>Let’s start running the database on Docker, for that we will create a docker compose file to avoid having to remember the docker command every time that you need to run MSSQL, on my setup I always save on my project one docker compose file with the infrastructure required to run the project, so let’s create a <code class=\"language-text\">infra.yml</code> file with this content:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3.9\"</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">sqldata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mcr.microsoft.com/mssql/server<span class=\"token punctuation\">:</span>2019<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> SA_PASSWORD=Password@\n      <span class=\"token punctuation\">-</span> ACCEPT_EULA=Y\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"5434:1433\"</span></code></pre></div>\n<p>And now you have to run <code class=\"language-text\">docker-compose -f infra.yml up -d</code> and you should see this result:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 691px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43930e5bc9bb037c631a44c560414f41/e185b/DockerComposeResult.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABD0lEQVQoz4VS2Y6DMBDjS/YqhLOlkBCOEEIK7f//kXcmfVi0WnUfLDsBeWxNomsn8ESCRhPrOHCjE+SFQJafILKvgJR0yvwCkfMz/M3AecYEYzXcOsG6EbMdYUyPa1PiXBfEFZq2Cue8iP829JvD/eHJxGIYOyzOYL97SFmjqFKUhPSQMss56YuE1k3Y94VSsqGkVAMeNIBTxMl7+Ekc8G9lrnXbLOwyQPcNVeyw7Q6XOscpfkMiPoLxbxzvWYv082m4rAaT4aoTsSZjHrBgnBRUV4ch/SChdEvcUguFgc7cJmhivi8rEUwjrjjPffi40oIMaQYP4IVpMuqGEmosw1KkuqCV57CcVv7o8BrI8BtpGtljHm+nUQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/43930e5bc9bb037c631a44c560414f41/8ac56/DockerComposeResult.webp 240w,\n/static/43930e5bc9bb037c631a44c560414f41/d3be9/DockerComposeResult.webp 480w,\n/static/43930e5bc9bb037c631a44c560414f41/c0989/DockerComposeResult.webp 691w\"\n          sizes=\"(max-width: 691px) 100vw, 691px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/43930e5bc9bb037c631a44c560414f41/8ff5a/DockerComposeResult.png 240w,\n/static/43930e5bc9bb037c631a44c560414f41/e85cb/DockerComposeResult.png 480w,\n/static/43930e5bc9bb037c631a44c560414f41/e185b/DockerComposeResult.png 691w\"\n          sizes=\"(max-width: 691px) 100vw, 691px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/43930e5bc9bb037c631a44c560414f41/e185b/DockerComposeResult.png\"\n          alt=\"Docker compose command result\"\n          title=\"Docker compose command result\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Now you have one container running Microsoft Sql server on your machine, listening on the port 5434. Now we have to create the database for future use on our environment, you can open your favorite IDE and connect to it, you should use <code class=\"language-text\">localhost</code> as the gost, <code class=\"language-text\">sa</code> as the login, custom port as <code class=\"language-text\">5434</code> and the password is defined on the docker compose as <code class=\"language-text\">Password@</code>.</p>\n<p>Now, let’s create a <code class=\"language-text\">Console Application</code>, for this project I will be using <code class=\"language-text\">.NET Core 3.1</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70aaa17d7a4792c5d9cd4bced6633b87/d0143/ConsoleApplicationCreation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABvUlEQVQ4y5VTyXbiQAzkV4J3t22874YEAjNjTpM5zP9/SUUlY16SQx451Gt3u1WqklqbIAiR7FLsBHG8Q5LcIN/8R4ShuSMIzO182ft+oHtz+79xXQ/9MKDvB5RlhbpuME17jMME13XlUoSiqJHnlSTNJWmqyLJSV8uy4TgurCCBZbvYeJ4vASWqqlY0TYPAD2HbjsBGJErLslUkSSZ3Wkm+lwS17vtuQifIi1YE+Avhqo62s0xURAmo/Olpi7bt8fbvP67XN8zzX5xOf/D6OuMo68vLL92fTjPyrBK1FjaU6ziOSt9uLcXdhlygtcvlivN5lsDfeH4+Y78/KsbxiGE44nC4qOI7Ie0txJ9BYmMiUdmJg1odpOIgywshWMAG0s0a84nwKzEJ2cGqZm1bbViS8EVkWpo0zRBFsXZ6jf9WIc+ZncEkJPK8VFWR1DmOBfJNFw8RUmFoDNquU9tsEFXtBCRlCbjSxcrxkELWahzlbU4HacIkJWhuz6xRsAQ/IqTl9Vmtk0S7xnBSfL1HNw/VkO90CY7VmucFekb4fqiTFMoY8v+3Cj92ntlXBSu45+xXMkFpWoiDRu57eAeOAYvYGDbWNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/70aaa17d7a4792c5d9cd4bced6633b87/8ac56/ConsoleApplicationCreation.webp 240w,\n/static/70aaa17d7a4792c5d9cd4bced6633b87/d3be9/ConsoleApplicationCreation.webp 480w,\n/static/70aaa17d7a4792c5d9cd4bced6633b87/e46b2/ConsoleApplicationCreation.webp 960w,\n/static/70aaa17d7a4792c5d9cd4bced6633b87/d1bdf/ConsoleApplicationCreation.webp 1025w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/70aaa17d7a4792c5d9cd4bced6633b87/8ff5a/ConsoleApplicationCreation.png 240w,\n/static/70aaa17d7a4792c5d9cd4bced6633b87/e85cb/ConsoleApplicationCreation.png 480w,\n/static/70aaa17d7a4792c5d9cd4bced6633b87/d9199/ConsoleApplicationCreation.png 960w,\n/static/70aaa17d7a4792c5d9cd4bced6633b87/d0143/ConsoleApplicationCreation.png 1025w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/70aaa17d7a4792c5d9cd4bced6633b87/d9199/ConsoleApplicationCreation.png\"\n          alt=\"Console application creation\"\n          title=\"Console application creation\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/54f505d32c29f341ddd2e94443f29a2e/51800/ProjectCreated.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFklEQVQoz3WT20/bMBSH83ekuTSx4zRpkzRt7r3RVsDKZSBNk4aYoExsQ+JxjzBeNk37r387dqcOjfLwyUl8/Pn4HEcr6wma2T6KZo6qmWE0XaIZz1E2U3peYEzvo8keinqKopqouUHeIC2nGNQzJPkYUTZCXo0hZu+gLRb7yPMacZwiivooiwp1RQFZiSRJkfaHyIYFBoNMxSREmmaIVtcIjm7BDtYITu8QHn1Cb7WGxjwBP4zR60UQQsB13S3tdptw4DjuFtM0SZ5jdHyB6fkVyuNLJAcf0Ns7V5tojsvgdwJ4YReMc9gksW0blmWpcYOlkBsYrRaKkk60OEP99hLh8j308gRmcQixvCAhY+ASkoowRCcIEfiUqeM8E25QQsNAluWIgg5cy4Tn2BCEb7fgVitoNmXoUKBJk5ZcpNhkJI/3HJm1rusYDqmGUQLGPHjCBxcdCErKbU6gSYkKNncL/kcKVYZRTHVm8KgHnBCM6l4fk9CyXl2863urpVOXB6qJjPGXQnm0XbLXkDUMwx4CqjXn3l+hvxE2JDTlrhRkUDYGHfvfuBuduhx2I5J2lZBxaiDB5VWTNfQcC4Hnwnfb4DZ1rW2pkVnGC2Q35XyfboOgzBjdy7jjIw4DRORg5SH9Kfe/MSdmd78w/vwDky8/1XN184T86oF43FKunxTF9Xf0Pz4SD/BO72GvvsJ9cwvj7Bv+ALkNbOFkLMS0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/54f505d32c29f341ddd2e94443f29a2e/8ac56/ProjectCreated.webp 240w,\n/static/54f505d32c29f341ddd2e94443f29a2e/d3be9/ProjectCreated.webp 480w,\n/static/54f505d32c29f341ddd2e94443f29a2e/e46b2/ProjectCreated.webp 960w,\n/static/54f505d32c29f341ddd2e94443f29a2e/31d32/ProjectCreated.webp 1196w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/54f505d32c29f341ddd2e94443f29a2e/8ff5a/ProjectCreated.png 240w,\n/static/54f505d32c29f341ddd2e94443f29a2e/e85cb/ProjectCreated.png 480w,\n/static/54f505d32c29f341ddd2e94443f29a2e/d9199/ProjectCreated.png 960w,\n/static/54f505d32c29f341ddd2e94443f29a2e/51800/ProjectCreated.png 1196w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/54f505d32c29f341ddd2e94443f29a2e/d9199/ProjectCreated.png\"\n          alt=\"Project created result\"\n          title=\"Project created result\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h2 id=\"lets-write-code\" style=\"position:relative;\"><a href=\"#lets-write-code\" aria-label=\"lets write code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let’s write code</h2>\n<p>Open your favorite MSSql IDE and let’s create one database:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">DATABASE</span> Example<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">USE</span> Example<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> Company <span class=\"token punctuation\">(</span>\n    Id <span class=\"token keyword\">int</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">CLUSTERED</span><span class=\"token punctuation\">,</span>\n    Name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> Person <span class=\"token punctuation\">(</span>\n    Id <span class=\"token keyword\">int</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">CLUSTERED</span><span class=\"token punctuation\">,</span>\n    Name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    Age <span class=\"token keyword\">datetime</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> Employment <span class=\"token punctuation\">(</span>\n    Id <span class=\"token keyword\">int</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token keyword\">CLUSTERED</span><span class=\"token punctuation\">,</span>\n    PersonId <span class=\"token keyword\">int</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    CompanyId <span class=\"token keyword\">int</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">CONSTRAINT</span> FK_Employment_People <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>PersonId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">REFERENCES</span> Person <span class=\"token punctuation\">(</span>Id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">CONSTRAINT</span> FK_Employment_Company <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>CompanyId<span class=\"token punctuation\">)</span> <span class=\"token keyword\">REFERENCES</span> Company <span class=\"token punctuation\">(</span>Id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"insert-data-on-the-database-with-dapper\" style=\"position:relative;\"><a href=\"#insert-data-on-the-database-with-dapper\" aria-label=\"insert data on the database with dapper permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Insert data on the database with Dapper</h3>\n<p>Open up the Visual studio project and install <a href=\"https://www.nuget.org/packages/Dapper/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dapper</a>. Let’s create the models that will be used to set/get the data on SQL.</p>\n<div class=\"gatsby-highlight\" data-language=\"c#\"><pre class=\"language-c#\"><code class=\"language-c#\">public class Person\n{\n  public int Id { get; set; }\n\n  public string Name { get; set; }\n\n  public DateTime Age { get; set; }\n}\n\npublic class Company\n{\n  public int Id { get; set; }\n\n  public string Name { get; set; }\n}\n\npublic class Employment\n{\n  public Company Company { get; set; }\n\n  public Person Person { get; set; }\n}</code></pre></div>","fields":{"slug":"/posts/2021/quick-start-dapper","tagSlugs":["/tag/c/","/tag/development/","/tag/database/"]},"frontmatter":{"date":"2021-03-14T01:33:49.000Z","description":"In this tutorial, I will make a quick introduction on Dapper and how can you quickly start using this incredible tool.","tags":["C#","Development","Database"],"title":"Quick introduction - Dapper C#","socialImage":"/media/Dapper.png"}}},"pageContext":{"slug":"/posts/2021/quick-start-dapper"}}}