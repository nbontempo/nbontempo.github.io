---
title: Worflow com o Git - Sugestões de uso
date: 2017-07-20T16:38:04-03:00
template: "post"
draft: false
slug: "workflow-com-git"
category: "Git"
tags:
  - "Git"
description: "Existem diversos padrões e estruturações quando se trata de versionamento de código com git. Iremos então debater o feature branch workflow que está sendo tão utilizado."
socialImage: "/media/image-2.jpg"
---

Existem diversos padrões e estruturações quando se trata de versionamento de código com git. Um _worflow_ que tem sido muito utilizado pela comunidade é o _Feature Branch Workflow_, que basicamente diz que cada nova funcionalidade do sistema (ou correção de bugs) deve ter uma nova _branch_, ao invés de ser trabalhada na _branch master_, o que encoraja vários desenvolvedores trabalharem na nova funcionalidade e diminui as chances de ocorrer código quebrado na _branch_ principal. Esse worflow melhora a comunicação entre a equipe graças a _code reviews_ pelos _pull requests_, tornando o ambiente de trabalho mais interativo e comunicativo, para se aprofundar nesse assunto recomendo o artigo da Atlassian [Feature branch workflow](https://www.atlassian.com/git/tutorials/comparing-workflows#feature-branch-workflow) (Spoiler, conteúdo em Inglês).

Outro conceito bem interessante é utilizar o _rebasing_ quando for oportuno, já que ele melhora a visão como um todo das mudanças realizadas na _master_ enquanto você estava criando sua nova funcionalidade. O _rebase_ funciona da seguinte forma, diferente do merge que ele realiza um _commit_ para introduzir as mudanças de uma branch em outra, o _rebase_ traz os _commits_ para o histórico da branch que está recebendo, mas ele deve ser utilizado com cuidado como dito no artigo também da Atlassian [Golden Rule of Rebasing](https://www.atlassian.com/git/tutorials/merging-vs-rebasing#the-golden-rule-of-rebasing) (Spoiler, conteúdo em Inglês).

Assim, esses dois conceitos juntos com o [Gitflow](https://www.atlassian.com/git/tutorials/comparing-workflows#gitflow-workflow) (Spoiler, conteúdo em Inglês), que melhora a organização da _master_ para realizar lançamento de atualizações, nomeando _branch_ de desenvolvimento e utilizando _tags_ para numeração de versões da _master_.

Os principais passos para elucidar esses conceitos em formato prático, são os seguintes:

- Criar uma _branch_ com uma nova funcionalidade ou correção de bugs

  ```
  git checkout -b <nomeDaBranch>
  ```

- Fazer mudanças

  ```
  git add
  git commit -m "descrição das mudanças"
  ```

- Sincronizar com as mudanças do servidor, caso você as tenha perdido

  ```
  git checkout develop
  git pull
  ```

- Atualizar a sua _branch_ com as últimas mudanças da _branch_ de desenvolvimento utilizando _interactive rebase_

  ```
  git checkout <nomeDaBranch>
  git rebase -i develop
  ```

- Caso você possua conflitos, resolva eles ([Aqui como](https://help.github.com/articles/resolving-a-merge-conflict-using-the-command-line/) (Spoiler, conteúdo em Inglês)) e continue o seu _rebase_

  ```
  .
  git rebase --continue
  ```

- Atualize a sua _branch_. Como o _rebase_ modifica o histórico, você precisa utilizar o `-f` para forçar mudanças dentro da _branch_ remota, caso você esteja trabalhando com mais pessoas nessa _branch_, use mudanças menos destrutivas através `--force-with-lease` ([Explicação](https://developer.atlassian.com/blog/2015/04/force-with-lease/) (Spoiler, conteúdo em Inglês)).

  ```
  git push -f
  ```

- Faça um _Pull request_

- Através do _Pull request_ a equipe pode dar opiniões sobre a qualidade do código, utilizando _code reviews_, se bem implementado na equipe pode vir a ser muito util e motivador

- O _Pull request_ vai ser aceito, realizado o _merge_ e fechado pelo revisor

- Remover a sua _branch_ local quando estiver finalizada

## Regras

Existem cuidados com o git que devem ser mantidos em mente, para obedecer os conceitos do worflow e gerar menores problemas no uso do git:

- Realizar trabalho apenas na _branch_ de novas funcionalidades.
- Criar _Pull requests_ apenas para a _branch `develop`_
- Nunca realizar _push_ diretamente para as _branch `develop`_ ou _`master`_.
- Atualizar sua _branch `develop`_ e fazer _rebase_ antes de realizar o _push_ da sua nova funcionalidade e criar um _pull request_
- Resolver potenciais conflitos enquanto realiza o _rebase_ e antes de criar um _pull request_
- Deletar a _branch_ local e remover a _branch_ de novas funcionalidade antes de fazer o merge.
- Antes de fazer um _Pull request_, tenha certeza que a sua _branch_ de nova funcionalidade compila normalmente e passa em todos os testes (incluso teste de estilo de código).
- Utilizar um gitignore apropriado para cada projeto, [crio meus gitignore através desse link](https://www.gitignore.io/).
- Proteja a sua _branch develop_ e a sua _master_ por permissões (No [Github](https://help.github.com/articles/about-protected-branches/) e [Bitbucket](https://confluence.atlassian.com/bitbucketserver/using-branch-permissions-776639807.html)).
- Escreva mensagens claras no _Commit_, tente alinhar as suas mensagens com o time, sempre observando se as suas mensagens estão claras iguais ao resto do time, talvez até sugerindo um padrão para melhorar a organização dos _commits_.
